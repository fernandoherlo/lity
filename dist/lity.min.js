/*! Lity - v2.0.0 - 2016-09-16
* http://sorgalla.com/lity/
* Copyright (c) 2015-2016 Jan Sorgalla; Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(a,c)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a,require("jquery")):a.lity=b(a,a.jQuery||a.Zepto)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(){function a(a){var b=a.target.getAttribute("data-lity-btn");"next"===b&&o!==!1&&o.click(),"prev"===b&&n!==!1&&n.click()}for(var b=p.querySelectorAll("[data-lity-btn]"),c=0;c<b.length;c++)b[c].addEventListener("click",a,!1)}function d(){r[s>0?"addClass":"removeClass"]("lity-active")}function e(a){var c=b.Deferred();return z?(a.one(z,c.resolve),setTimeout(c.resolve,500)):c.resolve(),c.promise()}function f(a,c,d){if(1===arguments.length)return b.extend({},a);if("string"==typeof c){if("undefined"==typeof d)return"undefined"==typeof a[c]?null:a[c];a[c]=d}else b.extend(a,c);return this}function g(a){for(var b,c=decodeURI(a).split("&"),d={},e=0,f=c.length;e<f;e++)c[e]&&(b=c[e].split("="),d[b[0]]=b[1]);return d}function h(a,c){return a+(a.indexOf("?")>-1?"&":"?")+b.param(c)}function i(a){return b('<span class="lity-error"/>').append(a)}function j(a){if(!t.test(a))return!1;var c=b('<img src="'+a+'">'),d=b.Deferred(),e=function(){d.reject(i("Failed loading image"))};return c.on("load",function(){return 0===this.naturalWidth?e():void d.resolve(c)}).on("error",e),d.promise()}function k(a){var c;try{c=b(a)}catch(a){return!1}if(!c.length)return!1;var d=b('<span style="display:none !important" class="lity-inline-placeholder"/>');return c.after(d).on("lity:ready",function(a,b){b.one("lity:remove",function(){d.before(c.addClass("lity-hide")).remove()})})}function l(a){var c,d=a;return c=u.exec(a),c&&(d=h("https://www.youtube"+(c[2]||"")+".com/embed/"+c[4],b.extend({autoplay:1},g(c[5]||"")))),c=v.exec(a),c&&(d=h("https://player.vimeo.com/video/"+c[3],b.extend({autoplay:1},g(c[4]||"")))),c=w.exec(a),c&&(d=h("https://www.google."+c[3]+"/maps?"+c[6],{output:c[6].indexOf("layer=c")>0?"svembed":"embed"})),'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+d+'"></iframe></div>'}function m(a){function g(a){27===a.keyCode&&l()}function h(){var a=p.documentElement.clientHeight?p.documentElement.clientHeight:Math.round(q.height());t.css("max-height",Math.floor(a)+"px").trigger("lity:resize",[r])}function i(a,c){r&&(t=b(c),q.on("resize",h),h(),r.find(".lity-loader").each(function(){var a=b(this);e(a).always(function(){a.remove()})}),r.removeClass("lity-loading").find(".lity-content").empty().append(t),t.removeClass("lity-hide").trigger("lity:ready",[r,a]),w.resolve())}function j(a,e,f,h){w=b.Deferred(),s++,d(),r=b(f.template).addClass("lity-loading").appendTo("body"),c(),f.esc&&q.on("keyup",g),setTimeout(function(){r.addClass("lity-opened lity-"+a).on("click","[data-lity-close]",function(a){b(a.target).is("[data-lity-close]")&&l()}).trigger("lity:open",[r,h]),b.when(e).always(b.proxy(i,null,h))},0)}function k(a,c,d){var e,f,g=b.extend({},x,v);if(o=!!d.parent().next()&&d.parent().next().find("a"),n=!!d.parent().prev()&&d.parent().prev().find("a"),c=b.extend({},y,u,c),c.handler&&g[c.handler])f=g[c.handler](a,m),e=c.handler;else{var h={};b.each(["inline","iframe"],function(a,b){g[b]&&(h[b]=g[b]),delete g[b]});var i=function(b,c){return!c||(f=c(a,m),f?(e=b,!1):void 0)};b.each(g,i),e||b.each(h,i)}return f&&b.when(l()).done(b.proxy(j,null,e,f,c,d)),!!f}function l(){if(r){var a=b.Deferred();return w.done(function(){s--,d(),q.off("resize",h).off("keyup",g),t.trigger("lity:close",[r]),r.removeClass("lity-opened").addClass("lity-closed");var b=r,c=t;r=null,t=null,e(c.add(b)).always(function(){c.trigger("lity:remove",[b]),b.remove(),a.resolve()})}),a.promise()}}function m(a){if(!a.preventDefault)return m.open(a);var c=b(this),d=c.data("lity-target")||c.attr("href")||c.attr("src");if(d){var e=c.data("lity-options")||c.data("lity");k(d,e,c)&&(c.blur(),a.preventDefault())}}var r,t,u={},v={},w=b.Deferred().resolve();return m.handlers=b.proxy(f,m,v),m.options=b.proxy(f,m,u),m.open=function(a,b,c){return k(a,b,c),m},m.close=function(){return l(),m},m.options(a)}var n,o,p=a.document,q=b(a),r=b("html"),s=0,t=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,u=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,v=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,w=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,x={image:j,inline:k,iframe:l},y={esc:!0,handler:null,template:'<div class="lity" tabindex="-1"><div class="lity-wrap" data-lity-close><div class="lity-loader">Loading...</div><div class="lity-container"><button data-lity-btn="prev" class="lity-prev btn">Previous</button><div class="lity-content"></div><button data-lity-btn="next" class="lity-next btn">Next</button><button class="lity-close" type="button" title="Close (Esc)" data-lity-close>Ã—</button></div></div></div>'},z=function(){var a=p.createElement("div"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return b[c];return!1}();return m.version="2.0.0",m.handlers=b.proxy(f,m,x),m.options=b.proxy(f,m,y),b(p).on("click","[data-lity]",m()),m});